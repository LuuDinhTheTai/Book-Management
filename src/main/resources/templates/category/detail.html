<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BM</title>
    <link rel="stylesheet" th:href="@{/style.css}"/>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìö</text></svg>">
</head>
<body>
<div th:replace="component/navbar :: navbar"></div>
<div class="container">
    <h1 class="page-title">Category: <span th:text="${category.name}"></span></h1>
    
    <div th:if="${category.description}" class="category-description">
        <p th:text="${category.description}"></p>
    </div>

    <div th:if="${successMessage}" class="success">
        <p th:text="${successMessage}"></p>
    </div>
    
    <div th:if="${errorMessage}" class="error">
        <p th:text="${errorMessage}"></p>
    </div>

    <div th:if="${books == null || #lists.isEmpty(books)}" class="empty-state">
        <p>No books found in this category.</p>
                        <a th:href="@{/books/}" class="btn-link">Browse All Books</a>
    </div>

    <div th:if="${books != null && !#lists.isEmpty(books)}">
        <h2>Books in this Category</h2>
        <div class="books-grid">
            <div th:each="book : ${books}" class="book-card">
                <div class="book-info">
                    <h3>
                        <a th:href="@{/books/{id}(id=${book.id})}" th:text="${book.name}"></a>
                    </h3>
                    <p class="book-price" th:text="${book.price + 'ƒë'}"></p>
                    <p class="book-status" th:text="${book.status}"></p>
                    <div class="book-actions">
                        <a th:href="@{/books/{id}(id=${book.id})}" class="btn-small">View Details</a>
                        <form th:action="@{/carts/add-item}" method="post" style="display: inline;">
                            <input type="hidden" name="bookId" th:value="${book.id}"/>
                            <input type="hidden" name="qty" value="1"/>
                            <button type="submit" class="btn-small">Add to Cart</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="category-actions">
        <a th:href="@{/categories/update/{id}(id=${category.id})}" class="btn-link">Edit Category</a>
        <form th:action="@{/categories/delete/{id}(id=${category.id})}" method="post" style="display: inline;">
            <button type="submit" class="btn-link btn-danger" style="margin-left: 10px;" onclick="return confirm('Delete this category?')">Delete Category</button>
        </form>
    </div>

    <div class="back-link">
        <a th:href="@{/categories/list}" class="btn-link">‚Üê Back to Categories</a>
    </div>
</div>
</body>
</html> 